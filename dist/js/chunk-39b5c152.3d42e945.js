(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39b5c152"],{"0732":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAANlBMVEUAAAD////////////////////////////////////////////////////////////////////xY8b8AAAAEXRSTlMA+lGH3c+/rnZkUkAiB/EwF3C43msAAADDSURBVDjLpdTrDoMgDEBh8IJ4Qe37v+zMJDtxlG4J51dJvpiopE6p65wVzvvuPyeCNF3fI03nHNJ2SNshbYf85c4TabgU9z0mZM0tg1wNC1J3QXIBqTknnxyycE+ILFwJkTgVInElRBYuRWBMD4nL35CG5SFxR5CvwoFUX5iKR1YhDqlBHFKFOKQOcUgvOc+k/uxtknfTxlS5PusoMq7XKU/GhZzn+3RPuFISzpI4S+JaFgAS17qkkLjGRYrEtS17pOZes/AXmzUFzM0AAAAASUVORK5CYII="},"0ba4":function(t,e,s){t.exports=s.p+"img/img_weapon.76447149.png"},1522:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAAflBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////vroaSAAAAKXRSTlMAUfqH9QWaQf3SwHE1Kx0C49oaDO3Gq5+LeTgxJOrKubGObWRhWFY8EuoeYlcAAAEcSURBVDjLpdXZrsIgGATgoZbSvbbuevb9f/8XPJaKECeGJs4l+S4I/AwARynMikoSNc+JWBl3i4WVcQdYGXf1t5VRp1I5sGRX5SKy0zeSnM7EpvwLJbvVq1zSP3nJri3kmvWvl7y/1MM865wkBwwb55Yn+PMkB3w4mAFeskPt4CcCyQ7a7bJBINkB5eTSDqFkh/0ESyCU7KCss0uhJIdhggo3kiCWFg4ESW7tcbMjWY1wS47lcYQHcix1coaGXChP08pGJF/hHGPuXXa5G8G7SAFA74vu3vgcpa+BHzs6TSHKOZZvEuTFO5JNHkDjHUv13AGp1ED/FTqWrR5hA/Aj5EFfS4s5VdEmYuaVT5WRi9TeA0XK1fxw2ce/j39SvysF8ytw/AAAAABJRU5ErkJggg=="},"2a1c":function(t,e,s){t.exports=s.p+"img/icon_success.1a72039d.png"},"2b18":function(t,e,s){t.exports=s.p+"img/img_hand.cd9acc1c.png"},"2e4a":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{staticClass:"common-dialog",attrs:{width:t.width},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[n("div",{staticClass:"dialog-body d-flex flex-column justify-start align-center"},[n("div",{staticClass:"dialog-close",on:{click:t.hideDialog}}),n("div",{staticClass:"dialog-content"},[t.showIcon?n("div",{staticClass:"dialog-icon"},["success"==t.type?n("img",{attrs:{src:s("2a1c"),alt:""}}):t._e(),"error"==t.type?n("img",{attrs:{src:s("a4fd"),alt:""}}):t._e(),"other"==t.type?n("img",{attrs:{src:t.dialogIcon,alt:""}}):t._e()]):t._e(),t._t("content",(function(){return[n("div",{staticClass:"dialog-title"},[t._v(t._s(t.title))])]}))],2),n("div",{staticClass:"dialog-btns d-flex"},[n("p-button",{attrs:{from:"dialog",text:t.confirmText},on:{confirm:t.confirm}})],1)])])},i=[],o=(s("a9e3"),s("82c1")),a={name:"PConfirm",components:{PButton:o["a"]},props:{width:{type:Number,default:612}},data:function(){return{isShow:!1,title:"",confirmText:"",type:"",dialogIcon:null,showIcon:!0}},methods:{showDialog:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isShow=!0,this.title=t.title,this.type=t.type||"success",this.confirmText=t.confirmText||this.$vuetify.lang.t("$vuetify.common.confirm"),this.showIcon=void 0==t.showIcon||t.showIcon,this.dialogIcon=t.dialogIcon},hideDialog:function(){this.isShow=!1},confirm:function(){this.$emit("confirm"),this.hideDialog()}}},c=a,r=(s("3a56"),s("2877")),l=s("6544"),u=s.n(l),A=s("169a"),f=Object(r["a"])(c,n,i,!1,null,"5cd91571",null);e["a"]=f.exports;u()(f,{VDialog:A["a"]})},3650:function(t,e,s){"use strict";s("5675")},"3a56":function(t,e,s){"use strict";s("7f20")},"4a75":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAAWlBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////9ZMre9AAAAHXRSTlMAUfqHAqH98qqdbmNOPAsH1cm8u7KRi3VcRi8bE2hPImIAAAC/SURBVDjLjc9ZDoMwDEXRUEKYofPs/W+zagO6FKV6vV+WdRTFLlGWOVV0m032nzOLUro8j1I656LUDikcUjikcEjhkMohlUMqh1QOmXKPO7t+QK7dc1v27A4j8tsNO7PyFnfXYHb0yKUb92Y2bdvwnivkwvnKPoXWuSbEueYi7q1tKjQXmzshZ3i2ZPn6yc5+1K0+6Yu0K/zskMohlUMqh1QOqRxSOaRySOWQ0iFxQuKExAmJExInJE5InJAp9wKuoyWjkQhLFgAAAABJRU5ErkJggg=="},"4e00":function(t,e,s){t.exports=s.p+"img/hero_avatar.35ea4172.png"},5675:function(t,e,s){},"5a88":function(t,e,s){t.exports=s.p+"img/img_body.b2c84633.png"},"5ed7":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAAbFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8+T+BWAAAAI3RSTlMAUfqHywP1Iefe1BDZvC0UCgHwxbSCbU0nBsGlm496dUM4GReOWMgAAAD3SURBVDjLpdXbboMwEATQhdgYQgiQS9P03s7//2PVVYq1nVqLlHk+0tgPHss/qSpZlaquq3UOUOm7zUal70Ru0nVZOi4lla6bhyQqvd4H9MKSXWoQhSS7+QmNiJXstBitkGT32AA7IUkuHgEEKcjs5B0ABmGZ3VIMhGgluxigOV1JGidvuGWYrPzj9jV+c+ytzE5hhyVhtNJA6U9Zbr8stDKes+zG0iE1l8NSHo0jmbbQ1HvrWE47hWdyJIPe5UqOpHZ/kmP5U/3KjmUHdBM7li3w4T8ahS/GFeWh7Y0ryuZiXFk+rxyfeczu3tnjIfWn+e6x97+Pb/kTHonNgxsOAAAAAElFTkSuQmCC"},7907:function(t,e,s){},"7f20":function(t,e,s){},8336:function(t,e,s){t.exports=s.p+"img/img_head.c947a839.png"},"84d1":function(t,e,s){t.exports=s.p+"img/icon_currency_ice.099a9398.png"},"9e3e":function(t,e,s){"use strict";s("7907")},a4fd:function(t,e,s){t.exports=s.p+"img/icon_error.fe77c5ae.png"},c4e8:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAAoCAYAAACrUDmFAAAAAXNSR0IArs4c6QAABNRJREFUaEPdmmnMXVMUhp/XWCLU0JSao0RJQ2gqYkiKCEFEKX4IUm0EVTWkhlJFFBEVpYkxbSpiiCGR4ocQEkTMUwwpiVapRElUquYlr2/f6nd7zt1nf43rtuvf9+19zrufs/dee621r1jPTes5H1nAiBgOLJW0opc+RkRsBQyWtKjTuDoCRsQGwHvADsCxkt7qBciIOAp4AnhH0pi1ATwLmAd8DQyX9EuPAG4NfAlsCRwn6dm6cdXOYEQMAj4DdgEmSZrTC3CtMUTEDOBa4ENgf0l/VY2vE+AlwG3AV2n2fmsCGBGxej9J/TRy7U003CftQc/iYOBMSQ82BowID+oLYHfgQkl3FQh3BTBBXg9cA7wpaXQJoDfui8CfwPaSlvUo4F5pG3l4IyV91D7OyiUaEZ7uM4DnJR3dFC591a7NYNJ713sQmCXp0ixgRNgzfQtsBkyQ9ECPA14B3AR8B+wo6fd+PqB98BFxKvAo8AcwVNIPPQ64B/B5GuMYSS/lAG8HpgDvS/LUF1nOS+bai8RS54j4JgUj0yTNzAG+DhwEzJU0vlQwB5BrL9VL+3CBD3xggaQTagHT4f4jsAkwWdKdpYI5gFx7qV7bcbFM0pBOgAcDr6UOh0p6tVQwB5BrL9VLgCcBT6Zn95TU2pP9s4mIOA14JHXcTtL3pYI5gFx7qV4C3Bv4JD17pCSf4f9Yexh1PuCY02fZxpJ80BdZDiDXXiT2r5MZmo42/2ecpMfrAK8GbgCWS3K+VWw5gFx7sWBfXLop0Mp0zpV0bx3gLOBiYLGkXQco1tVIpjXGiFgJOAO6UtLNdYDO/ZwDfiBpv3UMcKnjZuBWSVPrAD21E71hJe2zjgE6IdgWmClpWh2gp/byVIMZ1m3AiNgGWCHp11LtiHAMuhFwmSTnsZVe1FN7C7BS0ualIu6fcyJ17RFxIGDv94KkCSXaEbEF8FN6ZrykuXWAfvF9qXHQAL9ksZOJiHMAJ9V2EraJku5vChkRO6XKgx85UdLTdYBjU7XK7TtLWtJUZDVvVgQIGKR9xrxER1UlsFXjiYgDgLdT22GSXqkDHAF8nBqPl/RMFwCrJJzRTJXklC1rEXG2k4PUccjqFYj2SMZ/OzxzWW66JB/6RVa6B9tevhzwHnLNs7FFxGzXjoCFklzGWGVrlCwi4jngGOApSV6yRbYWgC7/nSxpYZFgn2PzkjwEmC/J53hHwOnAdcAiSbsNQKx0D1piPnCepJ8HoOfqu1M8e1K/4+4cYKui5n4jJH1aIlo4g3YmzjtXxY4lWu4bEYcDL6fn1qisVS1Rf5HFLuAAMyR5NhtbAaCvA8ZKeqPxyys6RoSPlwvqwsu6suGNwFX2qJL2LRlAQ0An0qdIcvVuwBYRG6Z7E6dLUyTd0f6yOkBfmbU2e2VBtW5UDQDvSdXyRlcBnegj4ghHPoDfNawqQe90N+F17fU9W9JFA/7M/+GDEfEwcLpDPEnjqqQ6Afqo8JHhRNJXZ94zPWMR4WzHR4sZRtfdXeYuQF3bsFedI2lSz9D1ec/HXJ5wkVqSZ7HScoCjAHs5pyKeRV+l/e8WESNdmE7Vdx9lvgkrB/QTEfFQKkK5atzxPrxb5BHhKpor2EskTe6k2+RHCL7D7BeddAskp+N7zNzY/gYCcYZHyTsm8gAAAABJRU5ErkJggg=="},c7ba:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoBAMAAAB+0KVeAAAALVBMVEUAAAD///////////////////////////////////////////////////////+hSKubAAAADnRSTlMA+lGHSKEiv7FvYBMQCiVU3S0AAAC3SURBVCjPbdOxDcIwEEDRUxAVXRq6KGzABIyAmIAyHQVrMAMDULIGC9BHQOsZuOSS/LN8V349yy7OskzVSjm7umxV07cl/BzqEu5XCwWKLBQoAgVCHYQCoQ5Cge+uu4wUuHk0KfW3p1GDr2saZ3tXOsNjmuardIJCFKUGfVRq0EelBrOodIB5VBrG8Hh0Ufik+PFG13M8GTR6tvYzCAVCgTkFQoFQoKdAR4HxgkGB8dJCgfFHgAL/YJnB2Fxn118AAAAASUVORK5CYII="},ce71:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"burn-container"},[t.currentHeros.length||t.originHeros.length?n("div",{staticClass:"burn"},[n("div",{staticClass:"hero-container"},[n("p-select",{attrs:{light:"",items:[{name:"all",value:0}].concat(t.professionOptions)},on:{change:function(e){return t.filterHero(t.profession)}},scopedSlots:t._u([{key:"select-item",fn:function(e){return[t._v(t._s(e.currentItem.name))]}},{key:"menu-item",fn:function(e){var s=e.menuItem;return[t._v(t._s(s.name))]}}],null,!1,1803526310),model:{value:t.profession,callback:function(e){t.profession=e},expression:"profession"}}),n("div",{staticClass:"hero-content scroll-wrap"},t._l(t.currentHeros,(function(e,s){return n("div",{key:s,staticClass:"hero-item",class:t.selectedHero==e?"selected":"",on:{click:function(s){return t.selectHero(e)}}},[t._m(0,!0),n("div",{staticClass:"hero-info"},[n("div",{staticClass:"hero-name"},[t._v(t._s(e.profession))]),n("div",{staticClass:"hero-level"},[n("span",[t._v("lv."+t._s(e.level))]),n("img",{staticClass:"profession",attrs:{src:t.partImgs["profession"+e.profession],alt:""}})])])])})),0)],1),n("div",{staticClass:"select-hero"},[t.selectedHero?n("div",{staticClass:"hero"},[n("img",{attrs:{src:s("4e00"),alt:""}})]):t._e(),n("div",{staticClass:"stage"}),n("div",{staticClass:"burn-amount"},[t._m(1),n("div",{staticClass:"amount"},[t._v(t._s(t.burnAmount))])]),t.selectedHero?n("div",{staticClass:"confirm"},[n("p-button",{attrs:{loading:t.loading,text:t.GTAllowance>0?"Melt":"Approve"},on:{confirm:t.burnHero}})],1):t._e()]),n("div",{staticClass:"hero-detail"},[t.selectedHero?n("div",{staticClass:"detail"},[n("div",{staticClass:"detail-info"},[n("div",{staticClass:"detail-info-profession"},[n("img",{attrs:{src:t.partImgs["profession"+t.selectedHero.profession],alt:""}})]),t._m(2),n("div",{staticClass:"detail-info-level"},[t._v("Lv."+t._s(t.selectedHero.level))])]),n("div",{staticClass:"detail-abilities"},[n("div",{staticClass:"ability"},[t._m(3),n("span",{staticClass:"ability_name"},[t._v("HP")]),n("span",{staticClass:"ability_value"},[t._v(t._s(t.selectedHero.blood))])]),n("div",{staticClass:"ability"},[t._m(4),n("span",{staticClass:"ability_name"},[t._v("ATK")]),n("span",{staticClass:"ability_value"},[t._v(t._s(t.selectedHero.attack_value))])]),n("div",{staticClass:"ability"},[t._m(5),n("span",{staticClass:"ability_name"},[t._v("AS")]),n("span",{staticClass:"ability_value"},[t._v(t._s(t.selectedHero.attack_speed))])]),n("div",{staticClass:"ability"},[t._m(6),n("span",{staticClass:"ability_name"},[t._v("PR")]),n("span",{staticClass:"ability_value"},[t._v(t._s(t.selectedHero.magic_defends))])]),n("div",{staticClass:"ability"},[t._m(7),n("span",{staticClass:"ability_name"},[t._v("DEF")]),n("span",{staticClass:"ability_value"},[t._v(t._s(t.selectedHero.physical_defends))])])]),n("div",{staticClass:"detail-skills scroll-wrap"},t._l([1,2,3,4,5,6,7,8],(function(t){return n("div",{key:t,staticClass:"skill"})})),0)]):n("div",{staticClass:"hero-unselected"})])]):n("div",{staticClass:"empty"},[t._m(8)]),n("p-confirm",{ref:"pConfirm",on:{confirm:t.confirmBurnHero}},[n("template",{slot:"content"},[n("div",{staticClass:"confirm-burn"},[n("div",{staticClass:"content"},[t._v('"Note: The melting process of mech is irreversible, and data such as the original mech level and attributes will not be retained after melting.')]),n("div",{staticClass:"tip"},[t._v('(After melting will return 5 parts and a small amount of ICE)"')])])])],2),n("p-confirm",{ref:"errConfirm"}),n("p-confirm",{ref:"sucConfirm",attrs:{width:828}},[n("template",{slot:"content"},[n("div",{staticClass:"confirm-success"},[n("div",{staticClass:"success-title"},[t._v("PARTS ACQUIRED")]),n("div",{staticClass:"success-text"},[t._v('Full details are given in "PARTS"')]),n("div",{staticClass:"success-parts"},t._l(t.units,(function(e){return n("div",{key:e.unit_id,staticClass:"part",class:"quality-"+e.quality},[1==e.part?n("img",{staticClass:"part-img",attrs:{src:s("8336"),alt:""}}):t._e(),2==e.part?n("img",{staticClass:"part-img",attrs:{src:s("5a88"),alt:""}}):t._e(),3==e.part?n("img",{staticClass:"part-img",attrs:{src:s("2b18"),alt:""}}):t._e(),4==e.part?n("img",{staticClass:"part-img",attrs:{src:s("ea65"),alt:""}}):t._e(),5==e.part?n("img",{staticClass:"part-img",attrs:{src:s("0ba4"),alt:""}}):t._e(),n("img",{staticClass:"part-profession",attrs:{src:t.partImgs["profession"+e.profession],alt:""}})])})),0)])])],2)],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hero-img"},[n("img",{attrs:{src:s("4e00"),alt:""}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"burn-icon"},[n("img",{attrs:{src:s("84d1"),alt:""}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"detail-info-name"},[s("div",{staticClass:"name"},[t._v("123")]),s("div",{staticClass:"power"},[t._v("100000")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"ability_icon"},[n("img",{attrs:{src:s("4a75"),alt:""}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"ability_icon"},[n("img",{attrs:{src:s("1522"),alt:""}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"ability_icon"},[n("img",{attrs:{src:s("5ed7"),alt:""}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"ability_icon"},[n("img",{attrs:{src:s("0732"),alt:""}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"ability_icon"},[n("img",{attrs:{src:s("c7ba"),alt:""}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"empty-img"},[s("div",{staticClass:"empty-text"},[t._v("No mech could be assembled")])])}],o=s("1da1"),a=s("5530"),c=(s("96cf"),s("e9c4"),s("d3b7"),s("159b"),s("ddb0"),s("3ca3"),s("ac1f"),s("5319"),s("4e82"),s("4de4"),s("4d63"),s("c607"),s("2c3e"),s("25f0"),s("2e4a")),r=s("82c1"),l=s("e8a7"),u=s("dd70"),A=s("89cb"),f=s("ed08"),g=s("e5c8"),m=s("2f62"),h=s("3ee0"),d=h.Mecha,p=d.address,v=d.abi,C=h.Ice,b=C.address,w=C.abi,E=h.Merge,B=E.address,H=E.abi,y={name:"GameMelt",components:{PButton:r["a"],PConfirm:c["a"],PSelect:l["a"]},mixins:[g["a"]],data:function(){return{mechaCTR:null,mergeCTR:null,goldCTR:null,loading:!1,retry:0,maxRetry:3,selectedHero:null,GTAllowance:0,burnAmount:0,units:[],profession:0,partImgs:{}}},created:function(){this.loadImgs()},mounted:function(){this.pConfirm=this.$refs.pConfirm},methods:Object(a["a"])(Object(a["a"])({},Object(m["b"])(["setGT"])),{},{init:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.mechaCTR=new t.web3.eth.Contract(v,p),t.mergeCTR=new t.web3.eth.Contract(H,B),t.goldCTR=new t.web3.eth.Contract(w,b),t.getBurnAmount(),t.getGTAllowance(),t.getGTBalance(),!Object(f["d"])("HERO_CODE_RULE")){e.next=10;break}t.rules=Object(f["d"])("HERO_CODE_RULE"),e.next=14;break;case 10:return e.next=12,t.getRules();case 12:t.rules=e.sent,Object(f["g"])("HERO_CODE_RULE",JSON.stringify(t.rules));case 14:t.getHero();case 15:case"end":return e.stop()}}),e)})))()},loadImgs:function(){var t=this,e=s("c84d");e.keys().forEach((function(e){s("b4c4")("./part"+e.replace(".","")).then((function(s){var n=/\.\/(.+)\.png/,i=n.exec(e)[1];t.$set(t.partImgs,i,s.default)}))}))},filterHero:function(t){var e=this;this.loading||(void 0!==t&&(this.currentProfession=t),this.heros=this.originHeros.filter((function(t){return!e.currentProfession||t.profession==e.currentProfession})).sort((function(t,e){return e.timestamp-t.timestamp})),this.currentHeros=this.heros,this.selectedHero=this.heros[0])},selectHero:function(t){this.loading||(console.warn("selectHero",t),this.selectedHero=t)},resetHero:function(){this.originHeros=[],this.selectedHero=null},burnHero:function(){this.$refs.pConfirm.showDialog({type:"other",confirmText:"CONFIRM",dialogIcon:s("f5ca")})},confirmBurnHero:function(){this.rootAccount.isLoggedIn?this.checkAllowance()?this.selectedHero?this.checkBalance()?this.burn(this.selectedHero.token):this.$message.showMessage("余额不足，请充值"):this.$message.showMessage("请选择英雄"):this.approve():this.$EventBus.$emit("showConnect")},approve:function(){var t=this;if(console.log("approve 1"),!this.loading){console.log("approve 2"),this.loading=!0;var e=this.convertToWei(u["a"]);this.goldCTR.methods.approve(B,e).send({from:this.currentAccount}).on("transactionHash",(function(t){console.log("approve","正在执行智能合约",t)})).then((function(){t.loading=!1,t.GTAllowance=e,t.$message.showMessage("授权成功"),console.log("approve","合约执行成功")})).catch((function(e){t.loading=!1,t.$message.showMessage("授权失败，请重试"),console.log("approve",e)}))}},burn:function(t){var e=this;this.loading||(console.warn("burn hero token id",t),this.loading=!0,this.mergeCTR.methods.burn(t).send({from:this.currentAccount}).on("transactionHash",(function(t){console.log("burn","正在执行智能合约",t)})).then((function(t){console.log("burn",t),e.mint(t.transactionHash)})).catch((function(t){e.loading=!1,e.$message.showMessage("熔炼失败，请重试"),console.log("burn",t)})))},mint:function(t){var e=this;Object(A["c"])(t).then((function(t){console.log(317,t),e.loading=!1,e.units=t.units,e.$refs.sucConfirm.showDialog({showIcon:!1,confirmText:"CONFIRM"}),e.resetHero(),e.getHero()})).catch((function(s){console.log("burn mint",s),e.retry>=e.maxRetry?(e.loading=!1,e.$refs.errConfirm.showDialog({type:"error",title:"熔炼失败!",confirmText:"确定"})):(e.mint(t),e.retry++)}))},getBurnAmount:function(){var t=this;this.mergeCTR.methods.burnAmount().call().then((function(e){t.burnAmount=+t.convertToEther(e,0),console.log("[wallet] burn amount: ",t.burnAmount)})).catch((function(t){console.error("[wallet] burn amount: ",t)}))},getGTAllowance:function(){var t=this;console.warn("getGTAllowance",this.currentAccount,B),this.goldCTR.methods.allowance(this.currentAccount,B).call().then((function(e){console.log("[wallet] my GT allowance for burn: ",e),t.GTAllowance=e})).catch((function(t){console.error("[wallet] my GT allowance for burn: ",t)}))},getGTBalance:function(){var t=this;this.goldCTR.methods.balanceOf(this.currentAccount).call().then((function(e){console.log("[wallet] my GT: ",e),t.setGT(e)}))},checkAllowance:function(){var t=this.convertToEther(this.GTAllowance);return!(t<=0||t<this.burnAmount)},checkBalance:function(){return!(this.burnAmount>this.convertToEther(this.GT))},convertToEther:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,s=new RegExp("^(.*\\..{"+e+"}).*$","g");return this.web3.utils.fromWei(t+"","ether").replace(s,"$1")},convertToWei:function(t){return this.web3.utils.toWei(t+"","ether")}}),watch:{heros:function(t){this.total=t.length,this.totalPage=Math.ceil(this.total/this.pageSize)}}},_=y,R=(s("3650"),s("2877")),T=Object(R["a"])(_,n,i,!1,null,"c4e4b1e0",null);e["default"]=T.exports},e5c8:function(t,e,s){"use strict";var n,i,o=s("5530"),a=(s("d3b7"),s("25f0"),s("fb6a"),s("159b"),s("4e82"),s("07ac"),s("4d90"),s("dd70")),c=s("89cb"),r=s("2f62"),l={data:function(){return{professionOptions:a["c"],originHeros:[],heros:[],currentHeros:[],currentProfession:0,limit:500,total:0,rules:null}},computed:Object(o["a"])({},Object(r["c"])(["web3","currentAccount","rootAccount","GT","MT"])),created:function(){this.init()},methods:{getHero:function(){this.getHeroCount()},getHeroCount:function(){var t=this;this.mechaCTR.methods.balanceOf(this.currentAccount).call().then((function(e){if(console.log("[hero] my hero count: ",e),t.total=e,0==t.total)return t.heros=[],void(t.currentHeros=[]);for(var s=Math.ceil(t.total/t.limit),n=0;n<s;n++){var i=n*t.limit,o=(n+1)*t.limit>t.total?t.total:(n+1)*t.limit;t.getHeroTokens(i,o)}})).catch((function(t){console.log(t)}))},getHeroTokens:function(t,e){var s=this;this.mechaCTR.methods.tokensOf(this.currentAccount,t,e).call().then((function(n){for(var i=0;i<n.length;i++)s.originHeros[t+i]=s.formatToken(n[i]);console.log("[hero] my hero token: ",t,"-",e,n),s.getRobots(n,t,e)}))},getRobots:function(t,e,s){var n=this;this.mechaCTR.methods.getRobots(t).call().then((function(t){console.log("[hero] my hero mecha: ",e,"-",s,t);for(var i=0;i<t.length;i++)n.originHeros[e+i]=Object(o["a"])(Object(o["a"])({},n.originHeros[e+i]),n.formatAttr(t[i]));console.log("[hero] all my hero mecha",n.originHeros),s>=n.total&&n.filterHero(0)}))},formatToken:function(t){var e=this.web3.utils.toBN(t),s=e.toString(2),n=parseInt(s.slice(-14),2),i=parseInt(s.slice(-18,-14),2),o=parseInt(s.slice(0,-18),2);return{token:t,atomic:n,profession:i,timestamp:o}},formatAttr:function(t){var e=this,s={};return t.slice(1).forEach((function(t,n){var i=e.web3.utils.toBN(t),o=i.toString(2),a=e.rules[n],c=Object.values(a).sort((function(t,e){return t.sort-e.sort})),r=c.reduce((function(t,e){return t+e.bit_num}),0);o.length<r&&(o=o.padStart(r,"0")),c.forEach((function(t){s[t.attr_key]=parseInt(o.slice(t.start,t.end),2)||0}))})),Object(o["a"])({attrs:t,level:t[0]},s)},getRules:function(){return new Promise((function(t){Object(c["a"])().then((function(e){var s={};e.rule.forEach((function(t){var e=t.type,n=t.attrs,i={},o=0;n.sort((function(t,e){return t.sort-e.sort})).forEach((function(t){t.start=o,t.end=o+t.bit_num,i[t.attr_key]=t,o=t.end})),s[e]=i})),t(s)}))}))}}},u=l,A=s("2877"),f=Object(A["a"])(u,n,i,!1,null,null,null);e["a"]=f.exports},e8a7:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"p-select d-flex align-center",class:{light:t.light,dark:t.dark},on:{click:t.open,blur:t.hide}},[n("div",{staticClass:"select-icon"},[n("img",{staticClass:"select-arrow",class:t.isOpen?"open":"",attrs:{src:s("f5c8")}})]),n("div",{staticClass:"select-item"},[t._t("select-item",(function(){return[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.common."+t.currentItem.text))+" "),"asc"==t.currentItem.sort?[n("img",{staticClass:"sort-icon",attrs:{src:s("f9fc"),alt:""}})]:t._e(),"desc"==t.currentItem.sort?[n("img",{staticClass:"sort-icon",attrs:{src:s("c4e8"),alt:""}})]:t._e()]}),{currentItem:t.currentItem})],2),n("transition",{attrs:{name:"menu-fade"}},[t.isOpen?n("div",{staticClass:"select-menu"},t._l(t.items,(function(e,i){return n("div",{key:i,staticClass:"select-menu-item",on:{click:function(e){return t.select(i)}}},[t._t("menu-item",(function(){return[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.common."+e.text))+" "),"asc"==e.sort?[n("img",{staticClass:"sort-icon",attrs:{src:s("f9fc"),alt:""}})]:t._e(),"desc"==e.sort?[n("img",{staticClass:"sort-icon",attrs:{src:s("c4e8"),alt:""}})]:t._e()]}),{menuItem:e})],2)})),0):t._e()])],1)},i=[],o=(s("a9e3"),s("7db0"),s("d3b7"),{name:"PSelect",model:{prop:"value",event:"change"},props:{items:{type:Array,default:function(){return[]}},value:{type:Number,default:0},light:{type:Boolean,default:!1},dark:{type:Boolean,default:!1}},data:function(){return{isOpen:!1}},computed:{currentItem:function(){var t=this;return this.items.find((function(e){return e.value==t.value}))||this.items[0]}},methods:{hide:function(){this.isOpen=!1},open:function(){this.isOpen=!this.isOpen},select:function(t){this.$emit("change",this.items[t].value)}}}),a=o,c=(s("9e3e"),s("2877")),r=Object(c["a"])(a,n,i,!1,null,"bd0ab7c0",null);e["a"]=r.exports},ea65:function(t,e,s){t.exports=s.p+"img/img_leg.7613f29b.png"},f5ca:function(t,e,s){t.exports=s.p+"img/icon_dialog.806b4f5f.png"},f9fc:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAAoCAYAAACrUDmFAAAAAXNSR0IArs4c6QAABMVJREFUaEPdmnvIn2MYxz8fx5GYwxpzzshoEWuSQw2JkIzhD6GxhJk5ZBgzZEgmYyWHpkkOOZSGP0QUkvMph0bZjCmj0Mz50jX3b9799js8z/vWe9j139vvfp7r+jzXfd/XfX3vV9Zzcz3noytgRIwGlqsrB9PHiIitgOHqkk5xdQSMiA2A94EdgGPVtwcDZEQcBTwJvKtO6AvgWcCDwDfAaPW3QQK4NfAVsCVwnPpcu7jaZjAihgGfA7sAU9X5gwGuEUNEzAauAz4C9lf/aRVfJ8BLgduBr0v2/qgCGBHRc5y6lo+IuAeYplZ6XzufZQ1mFocDZ6oPVQaMiAzqS2B34CL17ipwOaYCYH6A14BT1O+qvrfVuIi4AbgWeEsdXwcwF+5LwN/A9uqKqoFUBMzX5bqeqL5Z9d3N4yJir7KM8qex6sfNY1pO0YjIdJ8BvKAeXSeAGoD52t/LdL23jo+eYyPivVyDwFz1sq6AEZE7U06dzYBz1QfqOK8J2Hj1QuB89dc6vsqSuBK4Gfge2FH9c609oEXaTwUeA/4CRqo/1nHaS8B0kbvhyerimv72AL4oz0xQX+4GeAcwHfhAzdTXsj4App+fgclqFvHKFhHflsPITHVON8A3gIOABerkyl7KwD4CNtzNBWaoOYu6WkQsyoIPLFJPaAtYivtPwCZl8d/V9e1NA3oBeH+u9abX5OYzrtWu2CqeHuVihTqiE+DBwOtlwKFq1qtaVhcwDwIRcQ6QtTZPT2lT1ASvZBFxEvBUGbyn2liTa3cTEXEa8GgZuJ36QyUPPQb1BjAfj4gDgSeAF9XmjHYMIyL2Bj4tg45Us4avtuZj1AVAnjnztLGxmoW+lvUWsEBuA6xUc4pWtogYWUpbPjNJzQ/VEvAa4MbczdTst2pbXwBrOysPRMSmQKPTOU9dc3BozmDuXpcAS9Vde+NwIABL9leVNXyVeku7DGbvlz3gh+p+QwxweZ6bgdvUK9oBZmqn5IJV9xligNkQbAvMUWe2A8zUzigazKghBphn0I2Ay9XsY1tuMpnaW4FV6uZDBTAitgB+KfHmUW9BO8CsP/eVH4fV3a7LYu/W0Xf8vZcfdaeiPOTjJ6rPtAOcWNSq/H1ndVldhwOxi0bEAcA7JdbD1FfbAY4BPik/Hq8+O0QAz87moMQ6oqcC0VwH8+88nqUsN0vNol/LBiiD81I7AharKWOssXUki4h4HjgGeFrNKVvLBggwp+QhwEI163hHwFnA9cASdbdadNVVtf8DaJIVe+Ev1fds8XInTdkjZcmOgA1FLQeNUT+r47S/MxgRhwOvlBjXUdZaTdH8IktTwAFmq5nNyjYAgNlHXtjueNlONrwJuDp3VHXfynT9PEUjYsOir2a7NF29sznWdoB5ZdZQt1oKqu2g+zODEXFENshAXgOMatWgd7qbyHmd83ueenGdLPbX2Ih4BDg9lQB1Uiu/nQCzVGTJyEYyr85Sah80FhHZ7aSWmgzj291ddrsATW0jd9X56tRBQ/ffWn885YkUqdXMYkvrBjgOyMuRbEUyi3mVNuAWEWNTmC7qe5ayvAmrD5hPRMTDRYRK1bjjfXh/kRcVLRXsZeq0Tn6r/BPCaumyv4Kv4yfvMbvF9i/nj4ZH9EZodwAAAABJRU5ErkJggg=="}}]);